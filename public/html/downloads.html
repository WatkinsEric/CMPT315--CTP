

<section ng-controller="DownloadCtrl as downloadCtrl">
    <div ng-repeat="document in downloadCtrl.info">
    <p class="preview" ng-show="downloadCtrl.getDisplay(document)">
        <img height="100" width="100" ng-src="{{document.previewPath}}"/><br>
        Title: {{document.TITLE}}<br>
        Province: {{document.PROVINCE}}<br>
        Grade: {{document.GRADE}}<br>
        Subject: {{document.SUBJECT}}<br>
        Average Rating: {{document.AVGRATING}}<br>
        <button type="button" ng-click="downloadCtrl.getMoreInfo(document.DOC_ID)">More Info</button>
        <button type="button" ng-click="downloadCtrl.displayAddCommentForm(document.DOC_ID)">Add Comment</button>
    </p>
    </div>
    <div class="details" ng-show="downloadCtrl.moreInfo.display">
        <img height="100" width="100" ng-src="{{downloadCtrl.moreInfo.previewPath}}"/><br>
        Title: {{downloadCtrl.moreInfo.TITLE}}<br>
        Province: {{downloadCtrl.moreInfo.PROVINCE}}<br>
        Grade: {{downloadCtrl.moreInfo.GRADE}}<br>
        Subject: {{downloadCtrl.moreInfo.SUBJECT}}<br>
        Average Rating: {{downloadCtrl.moreInfo.AVGRATING}}<br>
        Description: {{downloadCtrl.moreInfo.DESCRIPTION}}<br>

        <h2>Your Comments</h2>
        <p ng-repeat="c in downloadCtrl.moreInfo.comments" >
            <block ng-show="c.display">
            Comment: {{c.COMMENT}}
           <br> <button type="button" ng-click="downloadCtrl.updateCommentForm(c.COMMENT_ID)">Update Comment</button><br>
            </block>
        </p>
        <button type="button" ng-click="downloadCtrl.back()">Back to Search</button>

    </div>
    <div class="commentForm" ng-show="downloadCtrl.displayCommentForm">
        <p>Add a comment below</p>
        <form name="comment" ng-submit="comment.$valid && downloadCtrl.addComment()" novalidate>

            <textarea type="text" name="Comment" rows="10" cols="30" ng-model="downloadCtrl.comment" class="form-control" required></textarea>

            <button type="button" ng-click="downloadCtrl.cancelCommentForm()">Cancel</button>
            <input type="submit" class="form-control" value="Submit">


        </form>

    </div>

</section>